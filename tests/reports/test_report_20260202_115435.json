{
  "timestamp": "2026-02-02T11:54:35.917274",
  "summary": {
    "total_test_suites": 6,
    "passed_suites": 2,
    "failed_suites": 4,
    "error_suites": 0,
    "total_tests": 50,
    "total_passed": 19,
    "total_failed": 31,
    "success_rate": 38.0,
    "total_duration": 18.91948127746582
  },
  "test_suites": [
    {
      "name": "Core Entities",
      "status": "PASSED",
      "duration": 0.40157055854797363,
      "failed_tests": 0,
      "total_tests": 0,
      "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\\Users\\Carson\\AppData\\Local\\Programs\\Python\\Python312\\python.exe\ncachedir: .pytest_cache\nrootdir: C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\ncollecting ... collected 27 items\n\ntests/unit/test_core_entities.py::TestActivity::test_activity_creation PASSED [  3%]\ntests/unit/test_core_entities.py::TestActivity::test_activity_with_conflicts PASSED [  7%]\ntests/unit/test_core_entities.py::TestActivity::test_activity_hashable PASSED [ 11%]\ntests/unit/test_core_entities.py::TestActivity::test_activity_equality PASSED [ 14%]\ntests/unit/test_core_entities.py::TestTimeSlot::test_timeslot_creation PASSED [ 18%]\ntests/unit/test_core_entities.py::TestTimeSlot::test_timeslot_hashable PASSED [ 22%]\ntests/unit/test_core_entities.py::TestTimeSlot::test_timeslot_equality PASSED [ 25%]\ntests/unit/test_core_entities.py::TestTimeSlot::test_timeslot_repr PASSED [ 29%]\ntests/unit/test_core_entities.py::TestTroop::test_troop_creation PASSED  [ 33%]\ntests/unit/test_core_entities.py::TestTroop::test_troop_size_property PASSED [ 37%]\ntests/unit/test_core_entities.py::TestTroop::test_troop_size_categories PASSED [ 40%]\ntests/unit/test_core_entities.py::TestTroop::test_troop_needs_split PASSED [ 44%]\ntests/unit/test_core_entities.py::TestTroop::test_troop_get_priority PASSED [ 48%]\ntests/unit/test_core_entities.py::TestScheduleEntry::test_schedule_entry_creation PASSED [ 51%]\ntests/unit/test_core_entities.py::TestScheduleEntry::test_schedule_entry_argument_reordering PASSED [ 55%]\ntests/unit/test_core_entities.py::TestScheduleEntry::test_schedule_entry_hashable PASSED [ 59%]\ntests/unit/test_core_entities.py::TestScheduleEntry::test_schedule_entry_equality PASSED [ 62%]\ntests/unit/test_core_entities.py::TestSchedule::test_schedule_creation PASSED [ 66%]\ntests/unit/test_core_entities.py::TestSchedule::test_add_entry_success PASSED [ 70%]\ntests/unit/test_core_entities.py::TestSchedule::test_add_duplicate_entry_fails PASSED [ 74%]\ntests/unit/test_core_entities.py::TestSchedule::test_add_entry_troop_not_free_fails PASSED [ 77%]\ntests/unit/test_core_entities.py::TestSchedule::test_get_troop_schedule PASSED [ 81%]\ntests/unit/test_core_entities.py::TestSchedule::test_get_slot_activities PASSED [ 85%]\ntests/unit/test_core_entities.py::TestSchedule::test_remove_entry_success PASSED [ 88%]\ntests/unit/test_core_entities.py::TestSchedule::test_remove_nonexistent_entry_fails PASSED [ 92%]\ntests/unit/test_core_entities.py::TestSchedule::test_is_troop_free PASSED [ 96%]\ntests/unit/test_core_entities.py::TestSchedule::test_multislot_activity_handling PASSED [100%]\n\n============================= 27 passed in 0.07s ==============================\n",
      "stderr": "",
      "return_code": 0
    },
    {
      "name": "Constraint System",
      "status": "PASSED",
      "duration": 0.3832530975341797,
      "failed_tests": 0,
      "total_tests": 0,
      "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\\Users\\Carson\\AppData\\Local\\Programs\\Python\\Python312\\python.exe\ncachedir: .pytest_cache\nrootdir: C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\ncollecting ... collected 20 items\n\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_exclusive_areas_enforcement PASSED [  5%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_different_exclusive_areas_allowed PASSED [ 10%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_sailing_exclusivity_per_slot PASSED [ 15%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_beach_activities_allowed_slots PASSED [ 20%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_beach_activities_thursday_slots PASSED [ 25%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_accuracy_activity_limit PASSED [ 30%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_prohibited_pairs_same_day PASSED [ 35%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_canoe_activity_conflicts PASSED [ 40%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_aqua_trampoline_sharing_rules PASSED [ 45%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_aqua_trampoline_large_troop_exclusive PASSED [ 50%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_water_polo_sharing PASSED [ 55%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_multislot_activity_continuity PASSED [ 60%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_multislot_activity_thursday_duration PASSED [ 65%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_climbing_tower_dynamic_duration PASSED [ 70%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_troop_cannot_be_double_booked PASSED [ 75%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_troop_available_different_times PASSED [ 80%]\ntests/unit/test_constraint_system.py::TestConstraintValidation::test_multislot_blocks_other_activities PASSED [ 85%]\ntests/unit/test_constraint_system.py::TestConstraintHelpers::test_exclusive_areas_constant PASSED [ 90%]\ntests/unit/test_constraint_system.py::TestConstraintHelpers::test_beach_staff_activities_constant PASSED [ 95%]\ntests/unit/test_constraint_system.py::TestConstraintHelpers::test_activity_conflicts_property PASSED [100%]\n\n============================= 20 passed in 0.06s ==============================\n",
      "stderr": "",
      "return_code": 0
    },
    {
      "name": "Scheduling Algorithm",
      "status": "FAILED",
      "duration": 1.4812343120574951,
      "failed_tests": 15,
      "total_tests": 12,
      "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\\Users\\Carson\\AppData\\Local\\Programs\\Python\\Python312\\python.exe\ncachedir: .pytest_cache\nrootdir: C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\ncollecting ... collected 27 items\n\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_friday_reflection_scheduled_first PASSED [  3%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_super_troop_scheduled_for_all_troops PASSED [  7%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_super_troop_exclusivity PASSED [ 11%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_three_hour_activities_priority PASSED [ 14%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_top5_scheduling_priority PASSED [ 18%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_mandatory_top5_enforcement PASSED [ 22%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_day_specific_requests_honored FAILED [ 25%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_staff_optimization_integration PASSED [ 29%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_remaining_preferences_scheduled PASSED [ 33%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_gap_elimination_priority PASSED [ 37%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_clustering_optimization PASSED [ 40%]\ntests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_final_validation PASSED [ 44%]\ntests/unit/test_scheduling_algorithm.py::TestBatchProcessing::test_priority_level_processing FAILED [ 48%]\ntests/unit/test_scheduling_algorithm.py::TestBatchProcessing::test_conflict_resolution_between_troops PASSED [ 51%]\ntests/unit/test_scheduling_algorithm.py::TestBatchProcessing::test_commissioner_day_priority FAILED [ 55%]\ntests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_predictive_violation_checking FAILED [ 59%]\ntests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_multi_layer_validation FAILED [ 62%]\ntests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_proactive_gap_filling FAILED [ 66%]\ntests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_constraint_conflict_resolution FAILED [ 70%]\ntests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_multi_strategy_fallback FAILED [ 74%]\ntests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_critical_priority_enforcement FAILED [ 77%]\ntests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_high_priority_optimization FAILED [ 81%]\ntests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_medium_priority_fine_tuning FAILED [ 85%]\ntests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_priority_hierarchy_respected FAILED [ 88%]\ntests/unit/test_scheduling_algorithm.py::TestContinuousConstraintValidation::test_validation_before_every_action FAILED [ 92%]\ntests/unit/test_scheduling_algorithm.py::TestContinuousConstraintValidation::test_validation_after_placement FAILED [ 96%]\ntests/unit/test_scheduling_algorithm.py::TestContinuousConstraintValidation::test_immediate_violation_prevention FAILED [100%]\n\n================================== FAILURES ===================================\n___________ TestSchedulingPhases.test_day_specific_requests_honored ___________\ntests\\unit\\test_scheduling_algorithm.py:128: in test_day_specific_requests_honored\n    assert hasattr(scheduler, '_handle_day_specific_requests'), \\\nE   AssertionError: Scheduler should handle day-specific requests\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5229670>, '_handle_day_specific_requests')\n_____________ TestBatchProcessing.test_priority_level_processing ______________\ntests\\unit\\test_scheduling_algorithm.py:233: in test_priority_level_processing\n    assert hasattr(scheduler, '_process_priority_level'), \\\nE   AssertionError: Scheduler should have priority level processing method\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5351D30>, '_process_priority_level')\n_____________ TestBatchProcessing.test_commissioner_day_priority ______________\ntests\\unit\\test_scheduling_algorithm.py:267: in test_commissioner_day_priority\n    assert hasattr(scheduler, '_resolve_conflicts'), \\\nE   AssertionError: Scheduler should have conflict resolution method\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5324440>, '_resolve_conflicts')\n_______ TestPreventionBasedFramework.test_predictive_violation_checking _______\ntests\\unit\\test_scheduling_algorithm.py:285: in test_predictive_violation_checking\n    assert hasattr(scheduler, '_predictive_constraint_violation_check'), \\\nE   AssertionError: Scheduler should have predictive violation checking\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5327680>, '_predictive_constraint_violation_check')\n__________ TestPreventionBasedFramework.test_multi_layer_validation ___________\ntests\\unit\\test_scheduling_algorithm.py:303: in test_multi_layer_validation\n    result = scheduler._can_schedule(timeslot, activity, troop)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: ConstrainedScheduler._can_schedule() missing 1 required positional argument: 'day'\n___________ TestPreventionBasedFramework.test_proactive_gap_filling ___________\ntests\\unit\\test_scheduling_algorithm.py:312: in test_proactive_gap_filling\n    assert hasattr(scheduler, '_eliminate_gaps'), \\\nE   AssertionError: Scheduler should have gap elimination method\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5356240>, '_eliminate_gaps')\n______ TestPreventionBasedFramework.test_constraint_conflict_resolution _______\ntests\\unit\\test_scheduling_algorithm.py:318: in test_constraint_conflict_resolution\n    assert hasattr(scheduler, '_resolve_constraint_conflicts'), \\\nE   AssertionError: Scheduler should have constraint conflict resolution\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5334140>, '_resolve_constraint_conflicts')\n__________ TestPreventionBasedFramework.test_multi_strategy_fallback __________\ntests\\unit\\test_scheduling_algorithm.py:332: in test_multi_strategy_fallback\n    assert hasattr(scheduler, strategy), \\\nE   AssertionError: Scheduler should have _intelligent_swaps method\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5335BE0>, '_intelligent_swaps')\n_____ TestPriorityBasedDecisionMaking.test_critical_priority_enforcement ______\ntests\\unit\\test_scheduling_algorithm.py:357: in test_critical_priority_enforcement\n    assert hasattr(scheduler, method), \\\nE   AssertionError: Scheduler should have _eliminate_empty_slots for critical priorities\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA53572F0>, '_eliminate_empty_slots')\n_______ TestPriorityBasedDecisionMaking.test_high_priority_optimization _______\ntests\\unit\\test_scheduling_algorithm.py:369: in test_high_priority_optimization\n    assert hasattr(scheduler, method), \\\nE   AssertionError: Scheduler should have _meet_activity_requirements for high priorities\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5354B60>, '_meet_activity_requirements')\n______ TestPriorityBasedDecisionMaking.test_medium_priority_fine_tuning _______\ntests\\unit\\test_scheduling_algorithm.py:381: in test_medium_priority_fine_tuning\n    assert hasattr(scheduler, method), \\\nE   AssertionError: Scheduler should have _optimize_setup for medium priorities\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5327740>, '_optimize_setup')\n______ TestPriorityBasedDecisionMaking.test_priority_hierarchy_respected ______\ntests\\unit\\test_scheduling_algorithm.py:387: in test_priority_hierarchy_respected\n    assert hasattr(scheduler, '_get_priority_level'), \\\nE   AssertionError: Scheduler should have priority level determination\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA53279E0>, '_get_priority_level')\n___ TestContinuousConstraintValidation.test_validation_before_every_action ____\ntests\\unit\\test_scheduling_algorithm.py:408: in test_validation_before_every_action\n    assert hasattr(scheduler, '_validate_constraints_before'), \\\nE   AssertionError: Scheduler should validate constraints before actions\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5325070>, '_validate_constraints_before')\n_____ TestContinuousConstraintValidation.test_validation_after_placement ______\ntests\\unit\\test_scheduling_algorithm.py:414: in test_validation_after_placement\n    assert hasattr(scheduler, '_validate_constraints_after'), \\\nE   AssertionError: Scheduler should validate constraints after placement\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002CDA5353EC0>, '_validate_constraints_after')\n___ TestContinuousConstraintValidation.test_immediate_violation_prevention ____\ntests\\unit\\test_scheduling_algorithm.py:426: in test_immediate_violation_prevention\n    result = scheduler._can_schedule(timeslot, activity, troop)\n             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: ConstrainedScheduler._can_schedule() missing 1 required positional argument: 'day'\n=========================== short test summary info ===========================\nFAILED tests/unit/test_scheduling_algorithm.py::TestSchedulingPhases::test_day_specific_requests_honored\nFAILED tests/unit/test_scheduling_algorithm.py::TestBatchProcessing::test_priority_level_processing\nFAILED tests/unit/test_scheduling_algorithm.py::TestBatchProcessing::test_commissioner_day_priority\nFAILED tests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_predictive_violation_checking\nFAILED tests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_multi_layer_validation\nFAILED tests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_proactive_gap_filling\nFAILED tests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_constraint_conflict_resolution\nFAILED tests/unit/test_scheduling_algorithm.py::TestPreventionBasedFramework::test_multi_strategy_fallback\nFAILED tests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_critical_priority_enforcement\nFAILED tests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_high_priority_optimization\nFAILED tests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_medium_priority_fine_tuning\nFAILED tests/unit/test_scheduling_algorithm.py::TestPriorityBasedDecisionMaking::test_priority_hierarchy_respected\nFAILED tests/unit/test_scheduling_algorithm.py::TestContinuousConstraintValidation::test_validation_before_every_action\nFAILED tests/unit/test_scheduling_algorithm.py::TestContinuousConstraintValidation::test_validation_after_placement\nFAILED tests/unit/test_scheduling_algorithm.py::TestContinuousConstraintValidation::test_immediate_violation_prevention\n======================== 15 failed, 12 passed in 1.15s ========================\n",
      "stderr": "",
      "return_code": 1
    },
    {
      "name": "Performance Metrics",
      "status": "FAILED",
      "duration": 1.518214464187622,
      "failed_tests": 7,
      "total_tests": 11,
      "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\\Users\\Carson\\AppData\\Local\\Programs\\Python\\Python312\\python.exe\ncachedir: .pytest_cache\nrootdir: C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\ncollecting ... collected 19 items\n\ntests/unit/test_performance_metrics.py::TestScoringSystem::test_score_calculation_range SKIPPED [  5%]\ntests/unit/test_performance_metrics.py::TestScoringSystem::test_preference_satisfaction_scoring FAILED [ 10%]\ntests/unit/test_performance_metrics.py::TestScoringSystem::test_constraint_compliance_scoring FAILED [ 15%]\ntests/unit/test_performance_metrics.py::TestScoringSystem::test_schedule_quality_scoring FAILED [ 21%]\ntests/unit/test_performance_metrics.py::TestPreferenceSatisfactionMetrics::test_top5_satisfaction_calculation PASSED [ 26%]\ntests/unit/test_performance_metrics.py::TestPreferenceSatisfactionMetrics::test_top10_satisfaction_calculation PASSED [ 31%]\ntests/unit/test_performance_metrics.py::TestPreferenceSatisfactionMetrics::test_minimum_top10_requirement PASSED [ 36%]\ntests/unit/test_performance_metrics.py::TestStaffEfficiencyMetrics::test_staff_load_calculation PASSED [ 42%]\ntests/unit/test_performance_metrics.py::TestStaffEfficiencyMetrics::test_staff_balance_calculation PASSED [ 47%]\ntests/unit/test_performance_metrics.py::TestStaffEfficiencyMetrics::test_staff_efficiency_target FAILED [ 52%]\ntests/unit/test_performance_metrics.py::TestClusteringQualityMetrics::test_clustering_efficiency_calculation PASSED [ 57%]\ntests/unit/test_performance_metrics.py::TestClusteringQualityMetrics::test_excess_day_calculation PASSED [ 63%]\ntests/unit/test_performance_metrics.py::TestClusteringQualityMetrics::test_consecutive_day_bonus FAILED [ 68%]\ntests/unit/test_performance_metrics.py::TestScheduleQualityMetrics::test_completeness_metric PASSED [ 73%]\ntests/unit/test_performance_metrics.py::TestScheduleQualityMetrics::test_validity_metric PASSED [ 78%]\ntests/unit/test_performance_metrics.py::TestScheduleQualityMetrics::test_gap_elimination_metric PASSED [ 84%]\ntests/unit/test_performance_metrics.py::TestPerformanceAnalytics::test_analytics_data_collection PASSED [ 89%]\ntests/unit/test_performance_metrics.py::TestPerformanceAnalytics::test_performance_trends_tracking FAILED [ 94%]\ntests/unit/test_performance_metrics.py::TestPerformanceAnalytics::test_recommendation_generation FAILED [100%]\n\n================================== FAILURES ===================================\n___________ TestScoringSystem.test_preference_satisfaction_scoring ____________\ntests\\unit\\test_performance_metrics.py:56: in test_preference_satisfaction_scoring\n    troop = sample_schedule.troops[0] if sample_schedule.troops else \\\n                                         ^^^^^^^^^^^^^^^^^^^^^^\nmodels.py:465: in troops\n    return list(set(entry.troop for entry in self.entries))\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: unhashable type: 'Troop'\n____________ TestScoringSystem.test_constraint_compliance_scoring _____________\ntests\\unit\\test_performance_metrics.py:72: in test_constraint_compliance_scoring\n    violations = self._count_constraint_violations(sample_schedule)\n                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests\\unit\\test_performance_metrics.py:96: in _count_constraint_violations\n    for troop in schedule.troops:\n                 ^^^^^^^^^^^^^^^\nmodels.py:465: in troops\n    return list(set(entry.troop for entry in self.entries))\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: unhashable type: 'Troop'\n_______________ TestScoringSystem.test_schedule_quality_scoring _______________\ntests\\unit\\test_performance_metrics.py:80: in test_schedule_quality_scoring\n    gaps = self._count_empty_slots(sample_schedule)\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests\\unit\\test_performance_metrics.py:113: in _count_empty_slots\n    for troop in schedule.troops:\n                 ^^^^^^^^^^^^^^^\nmodels.py:465: in troops\n    return list(set(entry.troop for entry in self.entries))\n                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: unhashable type: 'Troop'\n___________ TestStaffEfficiencyMetrics.test_staff_efficiency_target ___________\ntests\\unit\\test_performance_metrics.py:289: in test_staff_efficiency_target\n    assert hasattr(scheduler, '_calculate_staff_efficiency'), \\\nE   AssertionError: Scheduler should have staff efficiency calculation method\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002A88E62AD20>, '_calculate_staff_efficiency')\n___________ TestClusteringQualityMetrics.test_consecutive_day_bonus ___________\ntests\\unit\\test_performance_metrics.py:374: in test_consecutive_day_bonus\n    unique_days = sorted(list(set(days)))\n                  ^^^^^^^^^^^^^^^^^^^^^^^\nE   TypeError: '<' not supported between instances of 'Day' and 'Day'\n---------------------------- Captured stdout call -----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Troop A: Reflection -> Fri-1 (north zone)\n  Troop B: Reflection -> Fri-2 (middle zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Troop A: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Troop B: Super Troop -> Tue-1 (best available, 1 ST on TUESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n  Processing Disc Golf requests...\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  No troops want Sailing in Top 10\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 1 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  No 3-hour activity requests found.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  No Delta+Sailing pairs scheduled\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 1 requests -> 1 primary days: ['Mon']\n    Troop A: Climbing Tower (#1) -> Mon-2\n    Scheduled 1/1 for Tower\n  ODS: 2 requests -> 1 primary days: ['Mon']\n    Troop A: GPS & Geocaching (#2) -> Mon-3\n    Troop A: Knots and Lashings (#3) -> Tue-1\n    Scheduled 2/2 for ODS\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Water Polo', 'Tamarac Wildlife Refuge', 'Troop Rifle', 'Float for Floats', 'Archery', 'Troop Shotgun', 'Nature Canoe', 'Canoe Snorkel', 'Aqua Trampoline', 'Troop Canoe', 'Back of the Moon', 'Itasca State Park'}\n  Found 1 limited activities with requests\n  Attempting to schedule Water Polo for 1 troops...\n  [OK] Troop B: Water Polo (rank #2)\n  Scheduled 1 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 0 troop(s) want Sailing - skipping pairing\n    Troop A: 9 gaps\n    Troop B: 10 gaps\n  [Phase A (Foundation & Clustering)] Found 19 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Troop A: Campsite Free Time -> TUE-2\n  [Gap Fill] Troop A: Gaga Ball -> TUE-3\n  [Gap Fill] Troop A: 9 Square -> FRI-2\n  [Gap Fill] Troop A: Fishing -> FRI-3\n  [Gap Fill] Troop A: Trading Post -> WED-1\n  [Gap Fill] Troop A: Dr. DNA -> WED-2\n  [Gap Fill] Troop B: Gaga Ball -> TUE-2\n  [Gap Fill] Troop B: 9 Square -> MON-2\n  [Gap Fill] Troop B: Fishing -> MON-3\n  [Gap Fill] Troop B: Troop Swim -> FRI-1\n  [Gap Fill] Troop B: Trading Post -> FRI-3\n  [Gap Fill] Troop B: Campsite Free Time -> WED-1\n  [Gap Fill] Troop B: Dr. DNA -> WED-3\n  Total gaps filled: 13\n  Filled 13 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 13\n  No gaps filled in iteration 2 - checking if complete...\n  Still have 6 gaps, continuing...\n    Iteration 3/8...\n  Total gaps filled: 13\n  No gaps filled in iteration 3 - checking if complete...\n  Still have 6 gaps, continuing...\n    Iteration 4/8...\n  [RELAXED FILL] Troop A: Campsite Free Time -> WED-3\n  [RELAXED FILL] Troop A: Campsite Free Time -> THU-1\n  [RELAXED FILL] Troop A: Campsite Free Time -> THU-2\n  [RELAXED FILL] Troop B: Campsite Free Time -> WED-2\n  [RELAXED FILL] Troop B: Gaga Ball -> THU-1\n  [RELAXED FILL] Troop B: Gaga Ball -> THU-2\n  Total gaps filled: 19\n  Filled 6 gaps this iteration\n    Iteration 5/8...\n  Total gaps filled: 19\n  No gaps filled in iteration 5 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 19\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  No troops requested Delta in their preferences\n  Commissioner busy slots mapped:\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  No troops need Sailing in Top 10\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Iteration 1: Not enough isolated sails to consolidate (0 found)\n  No Sailing moves made. Current: 0/0 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 0 activities scheduled\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 1, 'TUESDAY': 1, 'WEDNESDAY': 0, 'THURSDAY': 0, 'FRIDAY': 0}\n  Average: 0.4\n  Distribution already balanced\n  No consolidation possible\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Unknown: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Unknown: FRI-1: 1, FRI-2: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 6 outlier activities\n  No beneficial moves found for 6 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\n  No overlaps found\n  Removed duplicate: Troop A has extra Campsite Free Time @ THURSDAY-2\n  Removed duplicate: Troop A has extra Campsite Free Time @ TUESDAY-2\n  Removed duplicate: Troop A has extra Campsite Free Time @ WEDNESDAY-3\n  Removed duplicate: Troop B has extra Gaga Ball @ THURSDAY-2\n  Removed duplicate: Troop B has extra Gaga Ball @ TUESDAY-2\n  Removed duplicate: Troop B has extra Campsite Free Time @ WEDNESDAY-2\n  Total activity duplicates removed: 6\n  Filled Troop A @ TUESDAY slot 2 with Shower House [DUPLICATE]\n  Filled Troop A @ WEDNESDAY slot 3 with Troop Rifle [DUPLICATE]\n  Filled Troop A @ THURSDAY slot 2 with Troop Shotgun [DUPLICATE]\n  Filled Troop B @ TUESDAY slot 2 with Troop Rifle\n  Filled Troop B @ WEDNESDAY slot 2 with Archery [DUPLICATE]\n  Filled Troop B @ THURSDAY slot 2 with Climbing Tower [DUPLICATE]\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 1 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 0 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 0 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.09\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: 10.72\n  Iteration 0/50 (best: 10.72)\n  Iteration 20/50 (best: 10.72)\n  Iteration 40/50 (best: 10.72)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: 10.72\nFinal score: 10.72\nImprovement: 0.00 (0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  No violations detected during monitoring\n  [Monitor] Monitoring stopped. Checked 28 entries in 0.000s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 73.27\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 92.8 (Grade: A)\n  Strengths: 5\n  Weaknesses: 1\n  Recommendations: 0\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 4 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 100.0%\nStaff Efficiency: 95.0%\nClustering Quality: 60.0%\nTotal Violations: 0\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Prioritize Top 5 preferences in scheduling algorithm\n  3. Improve activity zone clustering for better efficiency\n  4. Exploit identified clustering opportunities for better organization\n\nAnalytics generated at: 2026-02-02T11:54:20.384216\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 28 placement examples\n  ML predictor generated 2 test predictions\n  Model trained on 28 placements\n  Model confidence level: 0.28\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.347\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.347\n    Final score: 0.347\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 2/2 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 2\n    Final satisfied: 2\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 2/2 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [OK] All troops have Friday Reflection\n    [OK] No beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n------------------------------ Captured log call ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n__________ TestPerformanceAnalytics.test_performance_trends_tracking __________\ntests\\unit\\test_performance_metrics.py:498: in test_performance_trends_tracking\n    assert hasattr(scheduler, '_generate_performance_report'), \\\nE   AssertionError: Scheduler should generate performance reports\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002A88E6422A0>, '_generate_performance_report')\n___________ TestPerformanceAnalytics.test_recommendation_generation ___________\ntests\\unit\\test_performance_metrics.py:505: in test_recommendation_generation\n    assert hasattr(scheduler, '_generate_recommendations'), \\\nE   AssertionError: Scheduler should generate improvement recommendations\nE   assert False\nE    +  where False = hasattr(<constrained_scheduler.ConstrainedScheduler object at 0x000002A88E71D8E0>, '_generate_recommendations')\n=========================== short test summary info ===========================\nFAILED tests/unit/test_performance_metrics.py::TestScoringSystem::test_preference_satisfaction_scoring\nFAILED tests/unit/test_performance_metrics.py::TestScoringSystem::test_constraint_compliance_scoring\nFAILED tests/unit/test_performance_metrics.py::TestScoringSystem::test_schedule_quality_scoring\nFAILED tests/unit/test_performance_metrics.py::TestStaffEfficiencyMetrics::test_staff_efficiency_target\nFAILED tests/unit/test_performance_metrics.py::TestClusteringQualityMetrics::test_consecutive_day_bonus\nFAILED tests/unit/test_performance_metrics.py::TestPerformanceAnalytics::test_performance_trends_tracking\nFAILED tests/unit/test_performance_metrics.py::TestPerformanceAnalytics::test_recommendation_generation\n=================== 7 failed, 11 passed, 1 skipped in 1.00s ===================\n",
      "stderr": "",
      "return_code": 1
    },
    {
      "name": "Success Metrics",
      "status": "FAILED",
      "duration": 8.567284107208252,
      "failed_tests": 4,
      "total_tests": 15,
      "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\\Users\\Carson\\AppData\\Local\\Programs\\Python\\Python312\\python.exe\ncachedir: .pytest_cache\nrootdir: C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\ncollecting ... collected 19 items\n\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_average_season_score_target FAILED [  5%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_top5_satisfaction_rate PASSED [ 10%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_multislot_activity_success_rate FAILED [ 15%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_schedule_empty_slots_zero PASSED [ 21%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_schedule_validity_100_percent PASSED [ 26%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_mandatory_top5_preferences PASSED [ 31%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_minimum_top10_preferences PASSED [ 36%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_hard_constraint_compliance PASSED [ 42%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_soft_constraint_minimization PASSED [ 47%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_exclusive_area_enforcement PASSED [ 52%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_beach_slot_rules PASSED [ 57%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_staff_limits_enforcement PASSED [ 63%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_capacity_limits_enforcement PASSED [ 68%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_aqua_trampoline_sharing_rules PASSED [ 73%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_mandatory_activities_scheduled FAILED [ 78%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_friday_reflection_compliance FAILED [ 84%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_super_troop_exclusivity PASSED [ 89%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_multislot_continuity PASSED [ 94%]\ntests/unit/test_success_metrics.py::TestSuccessMetrics::test_dynamic_sailing_duration PASSED [100%]\n\n================================== FAILURES ===================================\n_____________ TestSuccessMetrics.test_average_season_score_target _____________\ntests\\unit\\test_success_metrics.py:64: in test_average_season_score_target\n    from evaluate_week_success import calculate_week_score\nE   ImportError: cannot import name 'calculate_week_score' from 'evaluate_week_success' (C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\\evaluate_week_success.py)\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Canoe Snorkel', 'Troop Canoe', 'Aqua Trampoline', 'Troop Rifle', 'Back of the Moon', 'Nature Canoe', 'Water Polo', 'Float for Floats', 'Archery', 'Itasca State Park', 'Tamarac Wildlife Refuge', 'Troop Shotgun'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.005s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:21.480492\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n___________ TestSuccessMetrics.test_multislot_activity_success_rate ___________\ntests\\unit\\test_success_metrics.py:97: in test_multislot_activity_success_rate\n    assert success_rate == 100.0, f\"Multi-slot success rate {success_rate}% should be 100%\"\nE   AssertionError: Multi-slot success rate 50.0% should be 100%\nE   assert 50.0 == 100.0\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Canoe Snorkel', 'Troop Canoe', 'Aqua Trampoline', 'Troop Rifle', 'Back of the Moon', 'Nature Canoe', 'Water Polo', 'Float for Floats', 'Archery', 'Itasca State Park', 'Tamarac Wildlife Refuge', 'Troop Shotgun'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.003s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:22.279313\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n___________ TestSuccessMetrics.test_mandatory_activities_scheduled ____________\ntests\\unit\\test_success_metrics.py:241: in test_mandatory_activities_scheduled\n    assert mandatory in troop_activities, f\"{troop.name}: Mandatory activity {mandatory} should be scheduled\"\nE   AssertionError: Sequoyah: Mandatory activity Reflection should be scheduled\nE   assert 'Reflection' in {'Aqua Trampoline', 'Archery', 'Climbing Tower', 'Delta', 'Float for Floats', 'GPS & Geocaching', ...}\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Canoe Snorkel', 'Troop Canoe', 'Aqua Trampoline', 'Troop Rifle', 'Back of the Moon', 'Nature Canoe', 'Water Polo', 'Float for Floats', 'Archery', 'Itasca State Park', 'Tamarac Wildlife Refuge', 'Troop Shotgun'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.005s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:27.408073\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n____________ TestSuccessMetrics.test_friday_reflection_compliance _____________\ntests\\unit\\test_success_metrics.py:249: in test_friday_reflection_compliance\n    assert len(reflection_entries) == 1, f\"{troop.name}: Should have exactly 1 Reflection\"\nE   AssertionError: Sequoyah: Should have exactly 1 Reflection\nE   assert 0 == 1\nE    +  where 0 = len([])\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Canoe Snorkel', 'Troop Canoe', 'Aqua Trampoline', 'Troop Rifle', 'Back of the Moon', 'Nature Canoe', 'Water Polo', 'Float for Floats', 'Archery', 'Itasca State Park', 'Tamarac Wildlife Refuge', 'Troop Shotgun'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.000s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:27.808501\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n=========================== short test summary info ===========================\nFAILED tests/unit/test_success_metrics.py::TestSuccessMetrics::test_average_season_score_target\nFAILED tests/unit/test_success_metrics.py::TestSuccessMetrics::test_multislot_activity_success_rate\nFAILED tests/unit/test_success_metrics.py::TestSuccessMetrics::test_mandatory_activities_scheduled\nFAILED tests/unit/test_success_metrics.py::TestSuccessMetrics::test_friday_reflection_compliance\n======================== 4 failed, 15 passed in 8.15s =========================\n",
      "stderr": "",
      "return_code": 1
    },
    {
      "name": "Regression Detection",
      "status": "FAILED",
      "duration": 6.565096139907837,
      "failed_tests": 5,
      "total_tests": 12,
      "stdout": "============================= test session starts =============================\nplatform win32 -- Python 3.12.10, pytest-9.0.2, pluggy-1.6.0 -- C:\\Users\\Carson\\AppData\\Local\\Programs\\Python\\Python312\\python.exe\ncachedir: .pytest_cache\nrootdir: C:\\Users\\Carson\\OneDrive - Minnesota State\\Desktop\\Projects\\CampScheduler\\summer-camp-scheduler\ncollecting ... collected 17 items\n\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_top5_satisfaction PASSED [  5%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_schedule_completeness PASSED [ 11%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_schedule_validity FAILED [ 17%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_multislot_success FAILED [ 23%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_constraint_violations PASSED [ 29%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_staff_efficiency PASSED [ 35%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_clustering_quality PASSED [ 41%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_success_rate PASSED [ 47%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_mandatory_activities_present FAILED [ 52%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_exclusive_area_enforcement FAILED [ 58%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_bach_slot_rules_enforced PASSED [ 64%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_multislot_continuity PASSED [ 70%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_aqua_trampoline_sharing PASSED [ 76%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_scheduling_performance PASSED [ 82%]\ntests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_memory_usage FAILED [ 88%]\ntests/unit/test_regression_detection.py::TestBaselineComparison::test_baseline_comparison_file_exists PASSED [ 94%]\ntests/unit/test_regression_detection.py::TestBaselineComparison::test_baseline_metrics_loaded PASSED [100%]\n\n================================== FAILURES ===================================\n__________ TestRegressionDetection.test_regression_schedule_validity __________\ntests\\unit\\test_regression_detection.py:101: in test_regression_schedule_validity\n    validity_results = self._validate_schedule_validity(schedule, sample_troops)\n                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\ntests\\unit\\test_regression_detection.py:331: in _validate_schedule_validity\n    'is_valid': len(violations) == 0,\n                ^^^^^^^^^^^^^^^\nE   TypeError: object of type 'int' has no len()\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Nature Canoe', 'Troop Shotgun', 'Tamarac Wildlife Refuge', 'Itasca State Park', 'Water Polo', 'Canoe Snorkel', 'Archery', 'Aqua Trampoline', 'Back of the Moon', 'Float for Floats', 'Troop Rifle', 'Troop Canoe'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.009s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:30.911848\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n__________ TestRegressionDetection.test_regression_multislot_success __________\ntests\\unit\\test_regression_detection.py:119: in test_regression_multislot_success\n    assert success_rate == target, \\\nE   AssertionError: REGRESSION: Multi-slot success rate dropped to 50.0% (target: 100.0%)\nE   assert 50.0 == 100.0\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Nature Canoe', 'Troop Shotgun', 'Tamarac Wildlife Refuge', 'Itasca State Park', 'Water Polo', 'Canoe Snorkel', 'Archery', 'Aqua Trampoline', 'Back of the Moon', 'Float for Floats', 'Troop Rifle', 'Troop Canoe'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.005s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:31.388748\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n____ TestRegressionDetection.test_regression_mandatory_activities_present _____\ntests\\unit\\test_regression_detection.py:200: in test_regression_mandatory_activities_present\n    assert len(mandatory_missing) == 0, \\\nE   AssertionError: REGRESSION: Missing mandatory activities: ['Sequoyah: Reflection', 'Samoset: Reflection', 'Red Cloud: Reflection']\nE   assert 3 == 0\nE    +  where 3 = len(['Sequoyah: Reflection', 'Samoset: Reflection', 'Red Cloud: Reflection'])\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Nature Canoe', 'Troop Shotgun', 'Tamarac Wildlife Refuge', 'Itasca State Park', 'Water Polo', 'Canoe Snorkel', 'Archery', 'Aqua Trampoline', 'Back of the Moon', 'Float for Floats', 'Troop Rifle', 'Troop Canoe'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.006s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:33.508634\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n_____ TestRegressionDetection.test_regression_exclusive_area_enforcement ______\ntests\\unit\\test_regression_detection.py:209: in test_regression_exclusive_area_enforcement\n    assert len(exclusive_violations) == 0, \\\nE   AssertionError: REGRESSION: Exclusive area violations detected: [\"Aqua Trampoline (<Day.MONDAY: 'Monday'>, 3): 2 troops\"]\nE   assert 1 == 0\nE    +  where 1 = len([\"Aqua Trampoline (<Day.MONDAY: 'Monday'>, 3): 2 troops\"])\n---------------------------- Captured stdout setup ----------------------------\n\n======================================================================\nCONSTRAINED SCHEDULER - PHASE A: FOUNDATION\n======================================================================\n\n--- A.0 Friday Reflection (reserve Friday slots) ---\n\n--- Scheduling Friday Reflection for ALL troops (by campsite proximity) ---\nDEBUG: Checking slots for Reflection...\n  Massasoit: Reflection -> Fri-1 (north zone)\n  Samoset: Reflection -> Fri-1 (north zone)\n  Black Hawk: Reflection -> Fri-2 (middle zone)\n  Red Cloud: Reflection -> Fri-2 (middle zone)\n  Tamanend: Reflection -> Fri-3 (south zone)\n  Sequoyah: Reflection -> Fri-3 (south zone)\n\n--- A.0b Super Troop (mandatory) ---\n\n--- Scheduling Super Troop (flexible commissioner preference) ---\n  Tamanend: Super Troop -> Tue-1 (commissioner day bias)\n  Sequoyah: Super Troop -> Mon-1 (best available, 1 ST on MONDAY)\n  Samoset: Super Troop -> Mon-2 (commissioner day bias)\n  Red Cloud: Super Troop -> Tue-3 (commissioner day bias)\n  Massasoit: Super Troop -> Mon-3 (commissioner day bias)\n  Black Hawk: Super Troop -> Wed-1 (best available, 1 ST on WEDNESDAY)\n\n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\n\n--- Early HC/DG Scheduling (Tuesday Only, Top 3) ---\n  Processing History Center requests...\n    [SUCCESS] Sequoyah: History Center at Tue-1\n    [SUCCESS] Samoset: History Center at Tue-2\n    Tamanend wants BOTH HC and DG - attempting back-to-back...\n      Slot 1 free: False, Slot 2 free: True\n      Slot 2 free: True, Slot 3 free: True\n      HC at Slot 2 blocked by constraints\n    [PAIR FAIL] Could not schedule back-to-back. Falling back to single HC.\n    [SUCCESS] Tamanend: History Center at Tue-3\n  Processing Disc Golf requests...\n    [SUCCESS] Red Cloud: Disc Golf at Tue-1\n    [SUCCESS] Black Hawk: Disc Golf at Tue-2\n\n--- A.5 Thursday Sailing Reservation (Spine: early) ---\n\n--- Thursday Sailing for Largest Troop ---\n  Troops wanting Sailing (sorted by size):\n    Samoset: 12 scouts, Sailing is #9\n  Could not schedule Thursday Sailing for any troop\n\n--- A.5b Early Aqua Trampoline for Top 5 ---\n  [Early AT] Scheduled Aqua Trampoline for 4 troops (Top 5)\n\n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\n  [Top1 Beach] All top-1 beach preferences placed\n\n--- A.1 Scheduling 3-Hour Activities ---\n\n--- Scheduling 3-hour activities (Top Priority) ---\n  Found 1 requests for 3-hour activities. Scheduling in priority order...\n  [SUCCESS] Massasoit: Itasca State Park (Rank #8)\n  Scheduled 1 / 1 3-hour activities.\n\n--- A.7 Delta + Sailing pairing (reserve day) ---\n\n--- Scheduling Delta + Sailing Pairs ---\n  Scheduled 1 Delta+Sailing pairs\n\n--- A.2 Top 10 2-Hour Activities (Priority) ---\n\n--- Scheduling Top 10 2-Hour Activities (Priority) ---\n  [Priority 2-Hour] Sequoyah: Float for Floats (Rank #10)\n  [Priority 2-Hour] Red Cloud: Canoe Snorkel (Rank #5)\n\n--- A.4 Early staff area clustering ---\n\n--- Early Staff Area Clustering (Top 8) ---\n  Tower: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Samoset: Climbing Tower (#2) -> Mon-1\n    Black Hawk: Climbing Tower (#2) -> Mon-2\n    Sequoyah: Climbing Tower (#3) -> Wed-1\n    Red Cloud: Climbing Tower (#6) -> Mon-3\n    Scheduled 4/4 for Tower\n  Rifle: 4 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Troop Shotgun (#2) -> Mon-1\n    Samoset: Troop Rifle (#5) -> Mon-3\n    Tamanend: Troop Shotgun (#8) -> Mon-2\n    Scheduled 3/4 for Rifle\n  ODS: 7 requests -> 2 primary days: ['Mon', 'Tue']\n    Red Cloud: Ultimate Survivor (#3) -> Mon-2\n    Samoset: Ultimate Survivor (#4) -> Tue-1\n    Red Cloud: What's Cooking (#4) -> Tue-2\n    Sequoyah: GPS & Geocaching (#5) -> Wed-2\n    Massasoit: Chopped! (#5) -> Wed-1\n    Black Hawk: Ultimate Survivor (#6) -> Mon-1\n    Black Hawk: Knots and Lashings (#8) -> Wed-3\n    Scheduled 7/7 for ODS\n  Handicrafts: 2 requests -> 1 primary days: ['Mon']\n    Massasoit: Tie Dye (#4) -> Mon-2\n    Samoset: Tie Dye (#6) -> Wed-1\n    Scheduled 2/2 for Handicrafts\n\n\n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\n\n--- Priority Scheduling for Limited Activities (Max Rank: 4) ---\n  Limited activities to check: {'Nature Canoe', 'Troop Shotgun', 'Tamarac Wildlife Refuge', 'Itasca State Park', 'Water Polo', 'Canoe Snorkel', 'Archery', 'Aqua Trampoline', 'Back of the Moon', 'Float for Floats', 'Troop Rifle', 'Troop Canoe'}\n  Found 1 limited activities with requests\n  Attempting to schedule Archery for 4 troops...\n  [OK] Sequoyah: Archery (rank #2)\n  [OK] Samoset: Archery (rank #3)\n  [OK] Tamanend: Archery (rank #4)\n  [OK] Black Hawk: Archery (rank #4)\n  Scheduled 4 limited activities by priority\n\n--- A.8 Sailing pairs for Same-Day bonus ---\n\n--- Scheduling Sailing Pairs (Same-Day Bonus) ---\n  Only 1 troop(s) want Sailing - skipping pairing\n    Tamanend: 5 gaps\n    Sequoyah: 6 gaps\n    Samoset: 6 gaps\n    Red Cloud: 6 gaps\n    Massasoit: 6 gaps\n    Black Hawk: 6 gaps\n  [Phase A (Foundation & Clustering)] Found 35 total gaps [FAIL]\n  [IMMEDIATE FIX] Running emergency gap fill after Phase A (Foundation & Clustering)\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  [Gap Fill] Tamanend: Fishing -> MON-1\n  [Gap Fill] Tamanend: Gaga Ball -> TUE-2\n  [Gap Fill] Tamanend: Campsite Free Time -> THU-2\n  [Gap Fill] Tamanend: Greased Watermelon -> FRI-1\n  [Gap Fill] Tamanend: 9 Square -> FRI-2\n  [Gap Fill] Sequoyah: Delta -> MON-2\n  [Gap Fill] Sequoyah: Trading Post -> WED-3\n  [Gap Fill] Sequoyah: What's Cooking -> FRI-2\n  [Gap Fill] Sequoyah: Gaga Ball -> FRI-3\n  [Gap Fill] Sequoyah: Troop Canoe -> THU-1\n  [Gap Fill] Sequoyah: Troop Shotgun -> THU-2\n  [Gap Fill] Samoset: Troop Shotgun -> WED-2\n  [Gap Fill] Samoset: Troop Swim -> WED-3\n  [Gap Fill] Samoset: Aqua Trampoline -> FRI-1\n  [Gap Fill] Samoset: Dr. DNA -> FRI-3\n  [Gap Fill] Samoset: GPS & Geocaching -> THU-1\n  [Gap Fill] Samoset: Loon Lore -> THU-2\n  [Gap Fill] Red Cloud: Campsite Free Time -> WED-1\n  [Gap Fill] Red Cloud: Gaga Ball -> WED-2\n  [Gap Fill] Red Cloud: Greased Watermelon -> WED-3\n  [Gap Fill] Red Cloud: GPS & Geocaching -> FRI-1\n  [Gap Fill] Red Cloud: Hemp Craft -> FRI-2\n  [Gap Fill] Red Cloud: 9 Square -> FRI-3\n  [Gap Fill] Massasoit: Fishing -> WED-2\n  [Gap Fill] Massasoit: Gaga Ball -> WED-3\n  [Gap Fill] Massasoit: Trading Post -> FRI-2\n  [Gap Fill] Massasoit: Greased Watermelon -> FRI-3\n  [Gap Fill] Massasoit: 9 Square -> THU-1\n  [Gap Fill] Massasoit: Archery -> THU-2\n  [Gap Fill] Black Hawk: Dr. DNA -> MON-3\n  [Gap Fill] Black Hawk: Shower House -> TUE-3\n  [Gap Fill] Black Hawk: Campsite Free Time -> WED-2\n  [Gap Fill] Black Hawk: Delta -> FRI-1\n  [Gap Fill] Black Hawk: Fishing -> THU-1\n  [Gap Fill] Black Hawk: Gaga Ball -> THU-2\n  Total gaps filled: 35\n  Filled 35 gaps this iteration\n    Iteration 2/8...\n  Total gaps filled: 35\n  No gaps filled in iteration 2 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 35\n\n======================================================================\nPHASE B: CORE REQUESTS\n======================================================================\n\n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\n\n--- Per-Preference Scheduling (ranks 1-1) ---\n\n  [Top 5 - Batch 1] Placing preference #1...\n\n  Placement complete: 0 activities scheduled\n\n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\n  [Top1 Force] All Top 1 preferences placed\n\n--- B.1c Scheduling Top 2-5 ---\n\n--- Per-Preference Scheduling (ranks 2-5) ---\n\n  [Top 5 - Batch 2] Placing preference #2...\n\n  [Top 5 - Batch 3] Placing preference #3...\n\n  [Top 5 - Batch 4] Placing preference #4...\n\n  [Top 5 - Batch 5] Placing preference #5...\n\n  Placement complete: 0 activities scheduled\n\n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\n\n--- ENHANCED: Guaranteeing 90%+ Top 5 Satisfaction (Target: 16/18 available) ---\n  All Top 5 already satisfied\n\n--- B.3 Mandatory Top 5 enforcement ---\n\n--- MANDATORY Top 5 Enforcement (ALL Top 1-5 Required) ---\n  All troops have 100% Top 5 satisfaction!\n\n--- Scheduling Delta (by preference rank, early week bias, Sailing pairing) ---\n  Troops requesting Delta (sorted by rank): [('Black Hawk', 3), ('Sequoyah', 4), ('Samoset', 17), ('Tamanend', 20)]\n  WARNING: Could not schedule Delta for Black Hawk (#3)\n  WARNING: Could not schedule Delta for Sequoyah (#4)\n  WARNING: Could not schedule Delta for Samoset (#17)\n  Scheduled 0/4 Delta requests\n  Commissioner busy slots mapped:\n    Commissioner A: Fri-1, Fri-2, Fri-3, Mon-2, Mon-3, Thu-2, Wed-1\n    Commissioner B: Fri-3, Thu-1, Tue-1, Tue-3, Wed-3\n    Commissioner C: Fri-1, Mon-1, Mon-2\n\n--- B.8 Early Sailing for Top 10 troops ---\n\n--- Early Sailing for Top 10 Troops ---\n  Troops needing Sailing (Top 10):\n    Samoset: #9, 12 scouts\n  [FAILED] Samoset: No consecutive slots available\n  Scheduled Sailing for 0/1 troops\n\n--- B.9 Enforce Delta + Sailing same-day pairing ---\n\n--- Enforcing Delta + Sailing Same-Day Pairing ---\n  No Delta+Sailing pair adjustments needed\n\n--- B.10 Consolidate Sailing same-day clustering ---\n\n--- Consolidating Sailing to Cluster 2 Per Day ---\n  Wednesday: 1 sail(s) - ['Tamanend']\n  Iteration 1: Not enough isolated sails to consolidate (1 found)\n  No Sailing moves made. Current: 0/1 days with 2+ sails\n  [Phase B (Core Requests)] No gaps detected [OK]\n\n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\n  No additional Aqua Trampoline sharing opportunities found\n\n======================================================================\nPHASE C: REMAINING & OPTIMIZATION\n======================================================================\n\n--- Scheduling Day-Specific Requests (REQUIRED) ---\n\n--- C.2 Staff Optimization (consecutive activities) ---\n\n--- C.3 Balancing staff workload ---\n\n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\n\n--- Per-Preference Scheduling (ranks 6-20) ---\n\n  [Top 6-10] Prioritizing preferences 6-10...\n    Preference #7...\n    Preference #8...\n    Preference #9...\nDEBUG_TOWER: Tamanend (Commissioner B) -> Forced Day: Day.MONDAY\nDEBUG_TOWER: Primary Days: {<Day.MONDAY: 'Monday'>}\n  DEBUG_SLOT TUESDAY slot 1: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT TUESDAY slot 3: Score 237 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 2: Score 371 (Primary=False)\n  DEBUG_SLOT WEDNESDAY slot 3: Score 337 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 1: Score 159 (Primary=False)\n  DEBUG_SLOT THURSDAY slot 2: Score 162 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 1: Score 231 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 2: Score 268 (Primary=False)\n  DEBUG_SLOT FRIDAY slot 3: Score 240 (Primary=False)\n    Preference #10...\n\n  [Top 11-15] Prioritizing preferences 11-15...\n\n  [Top 16-20] Prioritizing preferences 16-20...\n\n  Placement complete: 5 activities scheduled\n  [WARNING] 2 Top 6-10 preferences could not be placed\n\n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\n\n--- Guaranteeing Minimum Top 10 (2-3 per troop) ---\n  All troops already meet minimum Top 10 requirement\n\n--- C.5 Guaranteeing Top 10 with exceptions ---\n\n--- Guaranteeing Top 10 (with exceptions) ---\n  Skipped 1 exceptions (3-hour/constrained activities)\n\n--- C.6 Filling remaining slots ---\n\n--- Scheduling balls activities during sailing ---\n  [Phase C.6 (Fill Slot Logic)] No gaps detected [OK]\n\n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\n  No additional Aqua Trampoline sharing opportunities found\n  [Phase C.7 (Aqua Trampoline Sharing)] No gaps detected [OK]\n\n======================================================================\nPHASE D: FINAL POLISH & VERIFICATION\n======================================================================\n\n--- D.1 Optimizing Friday Reflection slots ---\n\n--- D.2 Comprehensive clustering & smart swaps ---\n\n--- Staff Distribution Balancing ---\n  Staff per day: {'MONDAY': 4, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 0, 'FRIDAY': 1}\n  Average: 1.2\n  Overloaded days: [('MONDAY', 4)]\n  Underloaded days: [('TUESDAY', 0), ('THURSDAY', 0)]\n  [Balance] Massasoit: Super Troop MONDAY -> THURSDAY\n  Made 1 balancing swaps\n  New distribution: {'MONDAY': 3, 'TUESDAY': 0, 'WEDNESDAY': 1, 'THURSDAY': 1, 'FRIDAY': 1}\n  [Consolidate] Massasoit: Super Troop Thu-1 -> Mon-3 (swapped 9 Square)\n    [Is Exclusive Blocked] Skipping optimization (placeholder)\n    [Fill vacated] Massasoit: Water Polo -> Thu-1\n  Made 1 consolidation move(s)\n\n--- Comprehensive Smart Swap Analysis ---\n  Iteration 1: 0 smart swaps\n  Total comprehensive swaps: 0\n\n--- Aggressive Within-Troop Slot Swaps ---\n  Iteration 1: 0 within-troop swaps\n  Total within-troop swaps: 0\n\n--- Aggressive Within-Troop Swaps for Excess Day Reduction ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n  Total excess day reduction swaps: 0\n\n--- Aggressive Excess Day & Gap Reduction Pass ---\n    [Aggressive Excess Day Reduction] Skipping optimization (placeholder)\n    [Cross Troop Swaps] Tower: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Rifle Range: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Outdoor Skills: 1 excess days, looking for swaps...\n    [Cross Troop Swaps] Handicrafts: 2 excess days, looking for swaps...\n  [Phase D.2 (Comprehensive Clustering)] No gaps detected [OK]\n\n--- D.3 Early forced clustering consolidation ---\n  [Phase D.3 (Forced Clustering)] No gaps detected [OK]\n\n--- D.4 Friday Super Troop optimization ---\n\n--- Activity Clustering Optimization (All Days) ---\n  No clustering improvements found\n\n--- D.5 Flexible Reflection slot optimization ---\n\n--- Flexible Reflection Distribution (Spread Across Slots) ---\n  Commissioner A: Already distributed (1 per slot) [OK]\n  All commissioners already have troops spread across slots\n\n--- D.6 Commissioner load balancing ---\n\n--- Commissioner Load Balancing ---\n  Commissioner A: FRI-1: 1, FRI-2: 1 [OK]\n  Commissioner B: FRI-3: 1 [OK]\n\n--- D.7 Setup Efficiency & Activity Clustering ---\n\n--- Staff Batching (Setup Efficiency) ---\n  No batching opportunities found\n\n--- Activity Clustering Optimization ---\n  Made 0 clustering swaps (including aggressive moves)\n  [Phase D.7 (Activity Clustering)] No gaps detected [OK]\n\n--- D.8 Outlier Activity Optimization ---\n\n--- Outlier Activity Optimization ---\n  Found 29 outlier activities\n  [Debug] Tamanend: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Tamanend: Troop Canoe (['only-on-day']) - attempted 2 moves, 2 blocked by constraints\n  [Debug] Sequoyah: Delta (['only-on-day']) - attempted 3 moves, 3 blocked by constraints\n  [Debug] Sequoyah: Climbing Tower (['only-on-day']) - attempted 6 moves, 6 blocked by constraints\n  [Debug] Sequoyah: GPS & Geocaching (['only-on-day']) - attempted 5 moves, 5 blocked by constraints\n  No beneficial moves found for 29 outlier activities\n    [Commissioner Day Ownership] Skipping optimization (placeholder)\n\n--- D.9 Post-Fill Cluster Gap Optimization ---\n    [Cluster Gap Post-Fill] Skipping optimization (placeholder)\n\n--- D.8 Top 10 Recovery & Gap Filling ---\n    [Top 10 Recovery from Fills] Skipping optimization (placeholder)\n\n--- D.9 Comprehensive final cleanup ---\n  [Comprehensive Final Cleanup - Max 3 iterations]\n    Iteration 1...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  Overlap fix: Tamanend @ WEDNESDAY slot 3\n    Kept: Sailing\n    Removed: Troop Canoe\n  Total issues fixed: 1\n  No overlaps found\n      Removed overlaps: 1 entries\n  No duplicates found\n  Replaced Sailing (#18) with Super Troop for Tamanend @ WEDNESDAY slot 2\n  Replaced 9 Square (#15) with Super Troop for Red Cloud @ FRIDAY slot 3\n  Filled Tamanend @ WEDNESDAY slot 3 with Tie Dye\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n  [HC/DG Pairing] Samoset: 9 Square -> Tue-2 (replaced History Center)\n  Added 1 balls activities for HC/DG pairing\n    Iteration 2...\n  No activity conflicts found\n  No exclusive area conflicts found\nDEBUG: Sequoyah Tower at Wed-1. EffSlots: 1\n  No overlaps found\n  No duplicates found\n        [Beach] Found violation: Sequoyah Float for Floats in TUESDAY Slot 2\n      [Beach] Fixed 0 beach slot violations\n      No changes detected - cleanup stable after 2 iteration(s)\n    Final gap guarantee...\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [Sanitize Exclusivity] No exclusivity conflicts found\n  [Cleanup Complete]\n  [Phase D.9 (Final Cleanup)] No gaps detected [OK]\n\n======================================================================\nENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\n======================================================================\n\n--- Applying enhanced constraint fixes ---\n=== ENHANCED CONSTRAINT FIXER ===\n\n1. Fixing Beach Slot Violations...\n  Found 1 beach slot violations\n\n2. Fixing Friday Reflection Missing...\n  Found 3 troops missing Friday Reflection\n\n3. Fixing Wet/Dry Pattern Violations...\n  Found 0 wet/dry pattern violations\n\n4. Fixing Delta Walking Violations...\n  Found 0 Delta walking violations\n\n=== SUMMARY ===\nTotal fixes applied: 0\n  beach_slot: 0\n  friday_reflection: 0\n  wet_dry_pattern: 0\n  delta_walking: 0\n  Applied 0 critical constraint fixes\n\n--- Optimizing staff workload balance ---\n=== ADVANCED STAFF BALANCE OPTIMIZER ===\nCurrent variance: 0.80\nTarget variance: 1.00\nStaff balance already optimal!\n  Reduced staff variance by 0.00\n\n--- Advanced preference optimization ---\n=== ADVANCED PREFERENCE OPTIMIZER ===\nInitial schedule score: -181.62\n  Iteration 0/50 (best: -181.62)\n  Iteration 20/50 (best: -181.62)\n  Iteration 40/50 (best: -181.62)\n\n=== OPTIMIZATION COMPLETE ===\nInitial score: -181.62\nFinal score: -181.62\nImprovement: 0.00 (-0.0%)\n  Improved preference satisfaction by 0.00\n\n--- Real-time constraint monitoring ---\n  [Monitor] Real-time constraint monitoring started\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  [RED] Beach activity 'Float for Floats' scheduled in invalid slot 2\n  [CRITICAL] Exclusive activity 'Aqua Trampoline' scheduled for multiple troops in same slot\n  Found 6 remaining violations during monitoring\n  [Monitor] Monitoring stopped. Checked 84 entries in 0.008s\n  [Monitor] Fixed 0 violations automatically\n\n--- Adaptive constraint weighting ---\n  Adaptive system score: 58.71\n  Constraint adaptations: 7\n\n--- Schedule quality prediction ---\n  Overall quality score: 68.5 (Grade: D)\n  Strengths: 3\n  Weaknesses: 3\n  Recommendations: 4\n\n--- Performance analytics ---\n=== PERFORMANCE ANALYTICS DASHBOARD ===\n  Analytics generated with 5 recommendations\n  Performance metrics calculated\n\n=== PERFORMANCE ANALYTICS SUMMARY ===\nSchedule Quality Score: 64.4%\nStaff Efficiency: 56.9%\nClustering Quality: 56.7%\nTotal Violations: 5\nViolations Fixed: 0\n\nTop Recommendations:\n  1. Consider optimizing scheduling algorithm for better performance\n  2. Focus on improving troop preference satisfaction\n  3. Improve activity zone clustering for better efficiency\n  4. Fix beach slot constraint violations\n  5. Ensure all troops have Friday Reflection scheduled\n\nAnalytics generated at: 2026-02-02T11:54:33.951265\n\n--- Machine learning activity placement prediction ---\n  [ML Predictor] Initializing machine learning model...\n  [ML Predictor] Model initialized with 84 placement examples\n  ML predictor generated 3 test predictions\n  Model trained on 84 placements\n  Model confidence level: 0.84\n\n--- Enhanced clustering optimization ---\n  [Enhanced Clustering] Initial clustering score: 0.209\n  [Enhanced Clustering] Starting optimization with 50 iterations...\n    Phase 1: Aggressive zone consolidation...\n    Phase 2: Cross-zone optimization...\n    Phase 3: Activity type clustering...\n  [Enhanced Clustering] Optimization complete:\n    Initial score: 0.209\n    Final score: 0.209\n    Total improvement: 0.000\n    Swaps made: 0\n  Clustering improvement: 0.000\n  Clustering swaps made: 0\n\n--- Top 5 preference guarantee ---\n  [Top5 Guarantee] Initial status: 6/6 troops satisfied\n  [Top5 Guarantee] Starting guarantee process with 100 iterations...\n  [Top5 Guarantee] Results:\n    Initial satisfied: 6\n    Final satisfied: 6\n    Improvement: 0\n    Swaps made: 0\n    Forced placements: 0\n    Constraint violations: 0\n    Available top 5 preferences: 0\n    Exempt top 5 preferences: 0\n  Top 5 satisfaction: 6/6 troops\n  Improvement: 0 troops\n  Forced placements: 0\n  [Enhanced Post-Processing] No gaps detected [OK]\n\n======================================================================\nFINAL VERIFICATION\n======================================================================\n  [Final Validation] Checking schedule integrity...\n  [Final Validation] No gaps detected [OK]\n  [Gap Fill] Starting ABSOLUTE gap detection and filling...\n    Iteration 1/8...\n  Total gaps filled: 0\n  No gaps filled in iteration 1 - checking if complete...\n  SUCCESS: All gaps filled!\n  Final gap filling complete. Total filled: 0\n    [WARNING] 3 troops missing Friday Reflection\n    [WARNING] 1 beach slot violations\n  [Final Validation] Complete\n    [Sanitize Exclusivity] No exclusivity conflicts found\n----------------------------- Captured log setup ------------------------------\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 CONSTRAINED SCHEDULER - PHASE A: FOUNDATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0 Friday Reflection (reserve Friday slots) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.0b Super Troop (mandatory) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.3 HC/DG Tuesday scheduling (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5 Thursday Sailing Reservation (Spine: early) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5b Early Aqua Trampoline for Top 5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.5c Guarantee Top 1 Beach (AT/WP/GM/etc.) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.1 Scheduling 3-Hour Activities ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.7 Delta + Sailing pairing (reserve day) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.2 Top 10 2-Hour Activities (Priority) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.4 Early staff area clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.6 Priority scheduling for limited activities (Global Rank 0-4) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- A.8 Sailing pairs for Same-Day bonus ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE B: CORE REQUESTS\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1 Scheduling Top 1 (FIRST PRIORITY) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1b Forcing Top 1 (make space before Top 2-5) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.1c Scheduling Top 2-5 ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.2 Guaranteeing 100% Top 5 satisfaction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.3 Mandatory Top 5 enforcement ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.8 Early Sailing for Top 10 troops ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.9 Enforce Delta + Sailing same-day pairing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.10 Consolidate Sailing same-day clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- B.11 Early Aqua Trampoline sharing (Top 5) ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE C: REMAINING & OPTIMIZATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- C.2 Staff Optimization (consecutive activities) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.3 Balancing staff workload ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4 Scheduling Remaining Preferences (Top 6-20) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.4.5 Guaranteeing Minimum Top 10 (2-3 per troop) ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.5 Guaranteeing Top 10 with exceptions ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.6 Filling remaining slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Scheduling balls activities during sailing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- C.7 Aggressively pairing Aqua Trampoline sharing ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 PHASE D: FINAL POLISH & VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- D.1 Optimizing Friday Reflection slots ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.2 Comprehensive clustering & smart swaps ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.3 Early forced clustering consolidation ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.4 Friday Super Troop optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.5 Flexible Reflection slot optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.6 Commissioner load balancing ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.7 Setup Efficiency & Activity Clustering ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Outlier Activity Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Post-Fill Cluster Gap Optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.8 Top 10 Recovery & Gap Filling ---\nINFO     scheduler:scheduler_logging.py:98 \n--- D.9 Comprehensive final cleanup ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 ENHANCED POST-PROCESSING: CRITICAL CONSTRAINT FIXES\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\nINFO     scheduler:scheduler_logging.py:98 \n--- Applying enhanced constraint fixes ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Optimizing staff workload balance ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Advanced preference optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Real-time constraint monitoring ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Adaptive constraint weighting ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Schedule quality prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Performance analytics ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Machine learning activity placement prediction ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Enhanced clustering optimization ---\nINFO     scheduler:scheduler_logging.py:98 \n--- Top 5 preference guarantee ---\nINFO     scheduler:scheduler_logging.py:92 \n======================================================================\nINFO     scheduler:scheduler_logging.py:93 FINAL VERIFICATION\nINFO     scheduler:scheduler_logging.py:94 ======================================================================\n____________ TestRegressionDetection.test_regression_memory_usage _____________\ntests\\unit\\test_regression_detection.py:268: in test_regression_memory_usage\n    import psutil\nE   ModuleNotFoundError: No module named 'psutil'\n=========================== short test summary info ===========================\nFAILED tests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_schedule_validity\nFAILED tests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_multislot_success\nFAILED tests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_mandatory_activities_present\nFAILED tests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_exclusive_area_enforcement\nFAILED tests/unit/test_regression_detection.py::TestRegressionDetection::test_regression_memory_usage\n======================== 5 failed, 12 passed in 6.06s =========================\n",
      "stderr": "",
      "return_code": 1
    }
  ],
  "recommendations": [
    "FAILED test suites indicate regressions - review failing tests immediately",
    "31 individual tests failed - check specific test failures"
  ]
}